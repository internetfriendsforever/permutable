<body>
  <script src="https://unpkg.com/kefir@3.8.5/dist/kefir.min.js"></script>
  <script src="https://unpkg.com/hyperhtml@latest/min.js"></script>
  <script>
    const { bind, wire } = hyperHTML

    const events = new EventTarget()
    const dispatch = (type, detail) => events.dispatchEvent(new CustomEvent(type, { detail }))

    const state = Kefir.combine({
      count: Kefir.fromEvents(events, 'count')
        .map(event => event.detail)
        .toProperty(() => 10)
        .scan((a, b) => a + b)
    })

    const count = props => wire(props)`
      <button onclick=${() => dispatch('count', props.change)}>
        ${props.label}
      </button>
    `

    const decrement = count({
      label: 'Decrement',
      change: -1
    })

    const increment = count({
      label: 'Increment',
      change: 1
    })

    state.onValue(values => {
      bind(document.body)`
        <h1>Count: ${values.count}</h1>
        ${decrement}
        ${increment}
      `
    })
  </script>
</body>
